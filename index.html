<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Download Data Tables from the USPTO PatentsView Service.">
<title>Download USPTO Patent Data from PatentsView • patentsviewdata</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Download USPTO Patent Data from PatentsView">
<meta property="og:description" content="Download Data Tables from the USPTO PatentsView Service.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">patentsviewdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/poldham/patentsviewdata/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="patentsviewdata">PatentsViewData<a class="anchor" aria-label="anchor" href="#patentsviewdata"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of patentsviewdata R package is to make it easier to download the data files from the United States Patent and Trademark Office (USPTO) <a href="https://patentsview.org/download/data-download-tables" class="external-link">PatentsView service</a>. The data download service involves multiple and often large data files that allow a user to construct the complete US patent collection in a form that is useful for data science.</p>
<p>The <code>patentsview</code> data package has been developed as part of the WIPO patent analytics team’s efforts to make patent data more accessible. It also complements the open access <a href="https://docs.ropensci.org/patentsview/index.html" class="external-link">patentsview API package</a> that is accessible from <a href="https://ropensci.org/" class="external-link">rOpenSci</a> and is on CRAN. If you don’t need the full USPTO data we suggest that you use the <a href="https://docs.ropensci.org/patentsview/index.html" class="external-link">PatentsView API package</a>.</p>
<p>This package has been developed by Paul Oldham as part of the work of the WIPO Patent Analytics team. You can find out more about that work on the <a href="https://wipo-analytics.github.io/" class="external-link">WIPO Patent Analytics website</a> including a post with <a href="https://wipo-analytics.github.io/posts/2022-01-11-patentsview-bulk-data/" class="external-link">a step by step guide</a> on how the functions were written.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of patentsviewdata from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"poldham/patentsviewdata"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>There are three main functions in the package.</p>
<ol style="list-style-type: decimal">
<li>pv_meta()</li>
<li>pv_download()</li>
<li>pv_import()</li>
</ol>
<div class="section level3">
<h3 id="pv_meta">pv_meta()<a class="anchor" aria-label="anchor" href="#pv_meta"></a>
</h3>
<p>pv_meta() access the patentsview metadata table for applications or grants on the website. The function fetches either the application or the <a href="https://patentsview.org/download/data-download-tables" class="external-link">grant table</a> that you can see below. It also does some tidying up on the data to make it easier to access the data for download and to document your datasets.</p>
<p><img src="reference/figures/grants.png" width="100%"> For the applications (pregrants) and the grants page these tables are downloaded either to your working directory or to a destination you specify as follows. If the destination folder does not already exist it will be created. We recommend that you specify a grants and pregrant or applications folder. It will make life a lot simpler later on.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">applications_meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pv_meta.html">pv_meta</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"application"</span><span class="op">)</span>
<span class="va">grants_meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pv_meta.html">pv_meta</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"grant"</span><span class="op">)</span>

<span class="co"># or make your life easier and specify a destination</span>

<span class="va">applications_meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pv_meta.html">pv_meta</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"application"</span>, dest <span class="op">=</span> <span class="st">"applications"</span><span class="op">)</span>
<span class="va">grants_meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pv_meta.html">pv_meta</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"grant"</span>, dest <span class="op">=</span> <span class="st">"grants"</span><span class="op">)</span></code></pre></div>
<p>When you have the meta data files you are then able to download the files. The key here is to provide the url or a vector of urls for the file you are interested in. Again you can specify a location for the download.</p>
</div>
<div class="section level3">
<h3 id="pv_download">pv_download()<a class="anchor" aria-label="anchor" href="#pv_download"></a>
</h3>
<p>As there are a number of large files and internet connections vary there is a risk that the connection will time out. This is handled by the timeout funtion. This is set to 600 seconds (10 minutes) by default but you may want to change this depending on your connection speed.</p>
<p>We now want to download a single file from the grants table. Note that you do not have to specify a destination folder (it will be created if it does not exist) but it is strongly recommended. If you are downloading the entire collection of applications and grants this will turn into a lot of files with similar names fast.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/pv_download.html">pv_download</a></span><span class="op">(</span><span class="va">grant_meta</span><span class="op">$</span><span class="va">url</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, dest <span class="op">=</span> <span class="st">"grants"</span><span class="op">)</span> </code></pre></div>
<p>In the message you will see that the directory is created if it doesnt exist and you will see information about the size of the data.</p>
<blockquote>
<p>ℹ ‘grants’ dir created trying URL ‘<a href="https://s3.amazonaws.com/data.patentsview.org/download/application.tsv.zip" class="external-link uri">https://s3.amazonaws.com/data.patentsview.org/download/application.tsv.zip</a>’ Content type ‘binary/octet-stream’ length 81275891 bytes (77.5 MB) ================================================== downloaded 77.5 MB</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="pv_import">pv_import()<a class="anchor" aria-label="anchor" href="#pv_import"></a>
</h3>
<p>Once we have downloaded a file we can import it with <code><a href="reference/pv_import.html">pv_import()</a></code>. As the files are zipped we do not download them directly into an R object and your environment memory will fail if you try and do that with all the files anyway.</p>
<p>We then import the file. Note here that we are importing the applications file listed with the grants table not the pregrant table which also contains an applications table (so choose destinations and names accordingly).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">applications</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pv_import.html">pv_import</a></span><span class="op">(</span><span class="st">"grants/application.tsv.zip"</span><span class="op">)</span></code></pre></div>
<p>PatentsView data files are tab delimited. The PatentsView team have done a great job in providing individual file import scripts in R and Python in a <a href="https://github.com/PatentsView/PatentsView-Code-Snippets/tree/master/03_bulk_download_read_in" class="external-link">GitHub code snippets repo</a>. You can find the full set of R scripts <a href="https://github.com/PatentsView/PatentsView-Code-Snippets/tree/master/03_bulk_download_read_in/R%20Scripts" class="external-link">here</a>.</p>
<p>In developing the package we have focused on consolidating imports using the vroom package. However, if you run into problems we recommend reviewing the <a href="https://github.com/PatentsView/PatentsView-Code-Snippets/tree/master/03_bulk_download_read_in/R%20Scripts" class="external-link">R import scripts</a> created by the PatentsView team and if that doesnt work using <code>data.table::fread()</code> to figure out how to import the table.</p>
<p>We recommend that you familiarise yourself with a few of the files before going all the way and downloading everything.</p>
</div>
<div class="section level3">
<h3 id="downloading-multiple-files">Downloading Multiple Files<a class="anchor" aria-label="anchor" href="#downloading-multiple-files"></a>
</h3>
<p>You should think about what files you might actually want. If you download all files (including descriptions and claims and brief summary) you will need about 128Gb of space for the zipped files. Individual description files may go up to nearly 4Gb but most data files are a lot smaller than that.</p>
<p>So, make sure you have plenty of disk space.</p>
<p>We will illustrate by creating a small vector or urls (the first two urls in the grants_meta table.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">small</span> <span class="op">&lt;-</span> <span class="va">grants_meta</span><span class="op">$</span><span class="va">url</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span> <span class="co"># take the first two urls</span>

<span class="co"># pass this into `pv_download()`</span>

<span class="fu"><a href="reference/pv_download.html">pv_download</a></span><span class="op">(</span><span class="va">small</span>, dest <span class="op">=</span> <span class="st">"grants"</span>, timeout <span class="op">=</span> <span class="fl">600</span><span class="op">)</span></code></pre></div>
<p>Once the files are downloaded they will be ready to be imported.</p>
<p>Note that the <code><a href="reference/pv_download.html">pv_download()</a></code> function is designed to skip to the next url if the timeout is reached. This can mean that a file download may be incomplete after 10 minutes (timeout = 600) and the function will skip on.</p>
<p>It is therefore important when importing to check that you are getting the number of rows of data that are recorded in the meta data table under <code>number_of_rows()</code> (in the absence of a check sum). We can handle this in the import function by specifying our meta data data.frame (which needs to be loaded in your environment). For example, if we import one of the files we just downloaded and specify the path to the metadata table (saved as .rds by the <code><a href="reference/pv_meta.html">pv_meta()</a></code> function) we will receive an informative message on whether the rows match. If the row count does not match then you will receive a suggestion to try the PatentsView code snippets and if that fails <code>datatable::fread()</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>

<span class="co"># import the file</span>
<span class="va">grants_assignees</span> <span class="op">&lt;-</span>  <span class="fu"><a href="reference/pv_import.html">pv_import</a></span><span class="op">(</span><span class="st">"grants/assignee.tsv.zip"</span>, meta_path <span class="op">=</span> <span class="st">"grants/grant_meta.rds"</span><span class="op">)</span></code></pre></div>
<ul>
<li>✓ Number of Rows Matches the expected 538617 for ‘assignee’ in the metadata file file</li>
</ul>
</div>
<div class="section level3">
<h3 id="saving-files-as-different-types">Saving files as different types<a class="anchor" aria-label="anchor" href="#saving-files-as-different-types"></a>
</h3>
<p>The PatentsView team have done a great job in making the data available in a form that can be readily accessed by data scientists. However, we may want to save the downloaded data in different file formats to suit our needs. For example, we might want to use the newish <code>qs</code> package to save smaller files in the super fast <code>qs</code> format, save as standard <code>rda</code> or <code>rds</code> or save into parquet to use on an Apache Spark cluster. These options are handled in the <code>save_as</code> argument.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/poldham/patentsviewdata" class="external-link">patentsviewdata</a></span><span class="op">)</span>
<span class="va">grants_assignees</span> <span class="op">&lt;-</span>  <span class="fu"><a href="reference/pv_import.html">pv_import</a></span><span class="op">(</span><span class="st">"grants/assignee.tsv.zip"</span>, meta_path <span class="op">=</span> <span class="st">"grants/grant_meta.rds"</span>, 
                               dest <span class="op">=</span> <span class="st">"grants"</span>, save_as <span class="op">=</span> <span class="st">".qs"</span><span class="op">)</span>

<span class="co"># or</span>

<span class="va">grants_assignees</span> <span class="op">&lt;-</span>  <span class="fu"><a href="reference/pv_import.html">pv_import</a></span><span class="op">(</span><span class="st">"grants/assignee.tsv.zip"</span>, meta_path <span class="op">=</span> <span class="st">"grants/grant_meta.rds"</span>, 
                               dest <span class="op">=</span> <span class="st">"grants"</span>, save_as <span class="op">=</span> <span class="st">".parquet"</span><span class="op">)</span></code></pre></div>
<p>For each file save you will then see messages.</p>
<ul>
<li>✓ Number of Rows Matches the expected 538617 for ‘assignee’ in the metadata file file</li>
<li>✓ saved data to ‘grants/assignee.parquet’</li>
</ul>
<p>To import a file in the newish superfast <code>qs</code> format we would choose:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/traversc/qs" class="external-link">qs</a></span><span class="op">)</span>

<span class="va">assignee</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/qs/man/qread.html" class="external-link">qread</a></span><span class="op">(</span><span class="st">"grants/assignee.qs"</span><span class="op">)</span></code></pre></div>
<p>Note that <code>qs</code> functions are not intended to be used with very large datasets (but are benchmarked on datasets with 5 million rows and 115Mb) so be aware of this.</p>
<p>Parquet files are written using the <code>arrow</code> package and can be read as follows.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/apache/arrow/" class="external-link">arrow</a></span><span class="op">)</span>

<span class="va">assignee</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://arrow.apache.org/docs/r/reference/read_parquet.html" class="external-link">read_parquet</a></span><span class="op">(</span><span class="st">"grants/assignee.parquet"</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/poldham/patentsviewdata/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/poldham/patentsviewdata/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing patentsviewdata</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Paul Oldham <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1013-4390" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Paul Oldham.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
